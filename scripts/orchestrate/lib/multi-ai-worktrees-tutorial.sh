#!/usr/bin/env bash
#
# multi-ai-worktrees-tutorial.sh
# Phase 3.3: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
#
# Gitãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®ä½¿ã„æ–¹ã‚’æ®µéšçš„ã«å­¦ã¹ã‚‹ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚¬ã‚¤ãƒ‰
#
# Usage:
#   bash scripts/orchestrate/lib/multi-ai-worktrees-tutorial.sh
#

set -euo pipefail

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‚’æ¤œå‡º
PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"

# worktree-core.shã‚’ã‚½ãƒ¼ã‚¹
source "$PROJECT_ROOT/scripts/orchestrate/lib/worktree-core.sh"

# ========================================
# ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚¹ãƒ†ãƒƒãƒ—
# ========================================

tutorial_welcome() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Git Worktreesã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã‚ˆã†ã“ãï¼ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€Multi-AI Orchestiumã®Git Worktrees
çµ±åˆã«ã¤ã„ã¦å­¦ã³ã¾ã™ã€‚

æ‰€è¦æ™‚é–“: ç´„10åˆ†
é›£æ˜“åº¦: åˆç´š

å­¦ç¿’å†…å®¹:
  1. Gitãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®åŸºæœ¬æ¦‚å¿µ
  2. æœ€åˆã®ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®ä½œæˆ
  3. ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼å†…ã§ã®AIå®Ÿè¡Œ
  4. ãƒãƒ¼ã‚¸ã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  5. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

ENTERã‚’æŠ¼ã—ã¦é–‹å§‹...
MSG
  read
}

tutorial_step_1() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ã‚¹ãƒ†ãƒƒãƒ—1: Gitãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã¨ã¯ï¼Ÿ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Gitãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã‚’ä½¿ã†ã¨ã€åŒã˜ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰è¤‡æ•°ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’
æŒã¤ã“ã¨ãŒã§ãã€ãã‚Œãã‚ŒãŒç•°ãªã‚‹ãƒ–ãƒ©ãƒ³ãƒã«ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã•ã‚Œã¾ã™ã€‚

ã€å¾“æ¥ã®æ–¹æ³•ã€‘
  ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã‚Šæ›¿ãˆ â†’ AIå®Ÿè¡Œ â†’ ã‚³ãƒŸãƒƒãƒˆ â†’ ãƒ–ãƒ©ãƒ³ãƒåˆ‡ã‚Šæ›¿ãˆ...
  å•é¡Œ: ä¸¦åˆ—å®Ÿè¡Œæ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ç«¶åˆãŒç™ºç”Ÿ

ã€ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼æ–¹å¼ã€‘
  7ã¤ã®ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ï¼ˆclaude/, gemini/, amp/, qwen/, droid/, codex/, cursor/ï¼‰
  å„AIãŒç‹¬ç«‹ã—ãŸç©ºé–“ã§ä½œæ¥­ â†’ ç«¶åˆãªã—ï¼

ã‚¤ãƒ¡ãƒ¼ã‚¸:
  project/
  â”œâ”€â”€ .git/                    # ãƒ¡ã‚¤ãƒ³ãƒªãƒã‚¸ãƒˆãƒª
  â”œâ”€â”€ scripts/                  # ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒã®ã‚³ãƒ¼ãƒ‰
  â””â”€â”€ worktrees/
      â”œâ”€â”€ claude/               # Claudeã®ä½œæ¥­ç©ºé–“ï¼ˆai/claude-123ãƒ–ãƒ©ãƒ³ãƒï¼‰
      â”œâ”€â”€ gemini/               # Geminiã®ä½œæ¥­ç©ºé–“ï¼ˆai/gemini-456ãƒ–ãƒ©ãƒ³ãƒï¼‰
      â””â”€â”€ ...

ENTERã‚’æŠ¼ã—ã¦ç¶šè¡Œ...
MSG
  read
}

tutorial_step_2() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ã‚¹ãƒ†ãƒƒãƒ—2: æœ€åˆã®ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®ä½œæˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å®Ÿéš›ã«Qwenã®ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:
  create_worktree qwen

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ï¼š
  1. worktrees/qwen/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
  2. ai/qwen-XXXXXX ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆï¼ˆXXXXXXã¯ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰
  3. ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼çŠ¶æ…‹ã‚’è¨˜éŒ²

MSG
  echo ""
  echo -n "$ "
  read user_command

  if [[ "$user_command" == "create_worktree qwen" ]] || [[ "$user_command" == *"qwen"* ]]; then
    echo ""
    echo "å®Ÿè¡Œä¸­..."
    create_worktree qwen
    echo ""
    echo "âœ“ Qwenã®ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ãŒä½œæˆã•ã‚Œã¾ã—ãŸï¼"
  else
    echo ""
    echo "ãƒ’ãƒ³ãƒˆ: 'create_worktree qwen' ã¨å…¥åŠ›ã—ã¦ãã ã•ã„"
    echo "ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ç¶šè¡Œã—ã¾ã™..."
  fi

  echo ""
  echo "ENTERã‚’æŠ¼ã—ã¦ç¶šè¡Œ..."
  read
}

tutorial_step_3() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®çŠ¶æ…‹ç¢ºèª
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä½œæˆã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®çŠ¶æ…‹ã‚’ç¢ºèªã§ãã¾ã™ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ:
  bash scripts/orchestrate/lib/multi-ai-worktrees-status.sh

MSG
  echo ""
  echo "å®Ÿè¡Œä¸­..."
  echo ""
  bash "$PROJECT_ROOT/scripts/orchestrate/lib/multi-ai-worktrees-status.sh"

  echo ""
  echo "èª¬æ˜:"
  echo "  ğŸŸ¢ ã‚¢ã‚¯ãƒ†ã‚£ãƒ– = ä½œæˆæ¸ˆã¿ã€ä½¿ç”¨å¯èƒ½"
  echo "  ğŸŸ¡ ä½œæˆä¸­ = ä½œæˆå‡¦ç†ä¸­"
  echo "  ğŸ”µ å®Ÿè¡Œä¸­ = AIå®Ÿè¡Œä¸­"
  echo "  âš« æœªä½œæˆ = ã¾ã ä½œæˆã•ã‚Œã¦ã„ãªã„"

  echo ""
  echo "ENTERã‚’æŠ¼ã—ã¦ç¶šè¡Œ..."
  read
}

tutorial_step_4() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼å†…ã§ã®AIå®Ÿè¡Œï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ã¯ã€å„AIãŒãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼å†…ã§ä½œæ¥­ã—ã¾ã™ï¼š

  execute_in_worktree qwen "Qwenã®ã‚¿ã‚¹ã‚¯" 300

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ï¼š
  1. worktrees/qwen/ ã«ç§»å‹•
  2. Qwenã‚’å®Ÿè¡Œï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ300ç§’ï¼‰
  3. å¤‰æ›´ã‚’è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆ
  4. ãƒ¡ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«æˆ»ã‚‹

ã€é‡è¦ã€‘å®Ÿéš›ã®AIå®Ÿè¡Œã¯è¡Œã„ã¾ã›ã‚“ï¼ˆæ™‚é–“ãŒã‹ã‹ã‚‹ãŸã‚ï¼‰ã€‚
æ¦‚å¿µã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒç›®çš„ã§ã™ã€‚

ENTERã‚’æŠ¼ã—ã¦ç¶šè¡Œ...
MSG
  read
}

tutorial_step_5() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ã‚¹ãƒ†ãƒƒãƒ—5: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ä½œæˆã—ãŸãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã—ã‚‡ã†ã€‚

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:
  cleanup_worktree qwen

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ï¼š
  1. worktrees/qwen/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤
  2. ai/qwen-XXXXXX ãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  3. ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼çŠ¶æ…‹ã‹ã‚‰å‰Šé™¤

MSG
  echo ""
  echo -n "$ "
  read user_command

  if [[ "$user_command" == "cleanup_worktree qwen" ]] || [[ "$user_command" == *"qwen"* ]]; then
    echo ""
    echo "å®Ÿè¡Œä¸­..."
    cleanup_worktree qwen
    echo ""
    echo "âœ“ Qwenã®ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ãŒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã¾ã—ãŸï¼"
  else
    echo ""
    echo "ãƒ’ãƒ³ãƒˆ: 'cleanup_worktree qwen' ã¨å…¥åŠ›ã—ã¦ãã ã•ã„"
    echo "è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™..."
    cleanup_worktree qwen
  fi

  echo ""
  echo "ENTERã‚’æŠ¼ã—ã¦ç¶šè¡Œ..."
  read
}

tutorial_step_6() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ã‚¹ãƒ†ãƒƒãƒ—6: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã€è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã§ãã¾ã™:

  bash scripts/orchestrate/lib/multi-ai-doctor.sh check

ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ï¼š
  âœ“ Gitãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ2.15+å¿…é ˆï¼‰
  âœ“ ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ï¼ˆ10GB+æ¨å¥¨ï¼‰
  âœ“ å¿…é ˆãƒ„ãƒ¼ãƒ«ï¼ˆflock, jq, yqï¼‰
  âœ“ ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼çŠ¶æ…‹ã®æ•´åˆæ€§
  âœ“ å¤ã„ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®å­˜åœ¨
  âœ“ git-rerereè¨­å®š

è‡ªå‹•ä¿®æ­£ã‚‚å¯èƒ½:
  bash scripts/orchestrate/lib/multi-ai-doctor.sh fix

ENTERã‚’æŠ¼ã—ã¦ç¶šè¡Œ...
MSG
  read
}

tutorial_completion() {
  clear
  cat << 'MSG'
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å®Œäº†ï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼Git Worktreesã®åŸºæœ¬ã‚’å­¦ã³ã¾ã—ãŸã€‚

ç¿’å¾—ã—ãŸå†…å®¹:
  âœ“ ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®æ¦‚å¿µã¨åˆ©ç‚¹
  âœ“ ãƒ¯ãƒ¼ã‚¯ãƒ„ãƒªãƒ¼ã®ä½œæˆã¨ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  âœ“ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
  âœ“ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
  1. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€: docs/WORKTREE_USER_GUIDE.md
  2. APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: docs/WORKTREE_API.md
  3. å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã§ä½¿ç”¨ã—ã¦ã¿ã‚‹

ä¾¿åˆ©ãªã‚³ãƒãƒ³ãƒ‰:
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª: bash scripts/orchestrate/lib/multi-ai-worktrees-status.sh
  - ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯: bash scripts/orchestrate/lib/multi-ai-doctor.sh
  - ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯: bash scripts/worktree-benchmark.sh

è³ªå•ã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯ã€GitHubã§Issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

ENTERã‚’æŠ¼ã—ã¦çµ‚äº†...
MSG
  read
}

# ========================================
# ãƒ¡ã‚¤ãƒ³å®Ÿè¡Œ
# ========================================

main() {
  tutorial_welcome
  tutorial_step_1
  tutorial_step_2
  tutorial_step_3
  tutorial_step_4
  tutorial_step_5
  tutorial_step_6
  tutorial_completion
}

main
